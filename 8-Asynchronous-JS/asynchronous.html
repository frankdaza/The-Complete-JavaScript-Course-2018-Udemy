<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Asynchronous JavaScript</title>
</head>
<body>
    <h1>Asynchronous JavaScript</h1>
    <script>
        // const second = () => {
        //     setTimeout(() => {
        //         console.log("Async Second");
        //     }, 2000);
        // };

        // const first = () => {
        //     console.log("Hey there");
        //     second();
        //     console.log("The end");
        // };

        // first();

        // function getRecipe() {
        //     setTimeout(() => {
        //         const recipeID = [23, 345, 2113, 545];
        //         console.log(recipeID);

        //         setTimeout(id => {
        //           const recipe = {
        //             title: "Fresh tomato",
        //             publisher: "Frank Daza"                    
        //           };

        //           console.log(`${id} - ${recipe.title}`);

        //           setTimeout(publisher => {
        //             const recipe2 = {
        //               tittle: "Italian pizza",
        //               publisher: "Jonas"            
        //             };

        //             console.log(recipe2);
        //           }, 1500, recipe.publisher);

        //         }, 1500, recipeID[2]);

        //     }, 2000);
        // }

        // getRecipe();


        const getIDs = new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve([23, 345, 2113, 545]);
          }, 2000);
        });

        const getRecipe = recID => {
          return new Promise((resolve, reject) => {
            setTimeout((ID) => {
              const recipe = {
                title: "Fresh tomato pasta",
                publisher: "Johan"
              };

              resolve(`${ID}: ${recipe.title}`);
            }, 1500, recID);
          });
        };

        const getRelated = publisher => {
          return new Promise((resolve, reject) => {
            setTimeout((pub) => {
              const recipe = {
                tittle: "Italian pizza",
                publisher: "Jonas"            
              };

              resolve(`${pub}: ${recipe.tittle}`)
            }, 1500, publisher);
          });
        };



        getIDs.then(id => {
          console.log(id);
          return getRecipe(id[2]);
        })
        .then(recipe => {
          console.log(recipe);
          return getRelated("Jonas");
       })
       .then(recipe => {
         console.log(recipe);
       })
       .catch(error => {
          console.log("Error!")
        });
    </script>
</body>
</html>